<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.TextFlow?>

<VBox spacing="10" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.serialcomm.controller.MavlinkTabController">
    <padding>
        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
    </padding>
    
    <!-- Protocol version selection area -->
    <HBox alignment="CENTER_LEFT" spacing="10">
        <Label fx:id="protocolVersionLabel" text="%ui.mavlink.protocol.version" />
        <ComboBox fx:id="protocolVersionComboBox" />
        <Region />
        <CheckBox fx:id="lightModeCheckBox" text="%ui.mavlink.light.mode" />
        <Button fx:id="clearFramesButton" text="%ui.mavlink.clear.frames" />
    </HBox>
    
    <!-- Split pane -->
    <SplitPane dividerPositions="0.3" orientation="VERTICAL">
        <!-- Raw data area -->
        <VBox spacing="5">
            <Label fx:id="rawDataLabel" text="%ui.mavlink.raw.data" />
            <TextArea fx:id="rawDataTextArea" editable="false" prefRowCount="8" styleClass="console-text" wrapText="true" VBox.vgrow="ALWAYS" />
        </VBox>
        
        <!-- Extracted frames area -->
        <VBox spacing="5">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label fx:id="extractedFramesLabel" text="%ui.mavlink.extracted.frames" />
                <Region />
                <Label fx:id="frameStatsLabel" text="%ui.mavlink.frame.stats" />
            </HBox>
            
            <ScrollPane fx:id="extractedFramesScrollPane" fitToWidth="true" VBox.vgrow="ALWAYS">
                <content>
                    <TextFlow fx:id="extractedFramesFlow" styleClass="frame-display" />
                </content>
            </ScrollPane>
            
            <!-- Statistics -->
            <HBox alignment="CENTER_LEFT" spacing="20">
                <Label fx:id="totalFramesLabel" text="Total: 0" />
                <Label fx:id="successFramesLabel" text="Success: 0" />
                <Label fx:id="failedFramesLabel" text="Failed: 0" />
                <Label fx:id="crcErrorsLabel" text="CRC Errors: 0" />
                <Separator orientation="VERTICAL" />
                <Label fx:id="frameRateLabel" text="Rate: 0 fps" />
            </HBox>
        </VBox>
    </SplitPane>
</VBox>
